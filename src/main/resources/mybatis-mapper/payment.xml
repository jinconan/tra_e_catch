<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mybatis.mapper.paymentMapper">
	<parameterMap id="pDVO" type="com.team.tra_e_catch.payment.PaymentVO">
		<parameter property="emp_no" javaType="int" mode="IN"/>
		<parameter property="dtype_no" javaType="int" mode="IN"/>
		<parameter property="path" javaType="java.lang.String" mode="IN"/>
		<parameter property="content" javaType="java.lang.String" mode="IN"/>
		<parameter property="doc_no" javaType="int" mode="IN"/>
		<parameter property="up_date" javaType="java.lang.String" mode="IN"/>
	</parameterMap>
	
	
	<resultMap id="pDVO" type="com.team.tra_e_catch.payment.PaymentVO">
		<id property="emp_no" column="emp_no" />
		<result property="dtype_no" column="dtype_no" />
		<result property="path" column="path" />
		<result property="content" column="content" />
		<result property="doc_no" column="doc_no" />
		<result property="up_date" column="up_date" />
		<association property="bsVO" resultMap="rBSVO" /> 
	</resultMap>
	
	
	
	
	<select id="getPaymentList" resultType="map" parameterType="map">

	<![CDATA[
	    select * from
    (select emp_no, dtype_no, path, content, doc_no, up_date, rownum as rno
     from docs where doc_no = #{doc_no} order by rno)
     where rno betWeen #{counts}*10-9 and #{counts}*10 order by rno
	 ]]> 
	</select>
	
	<insert id="epayInsert" parameterMap="pDVO">
		INSERT INTO DOCS(emp_no,dtype_no,path,content,doc_no
									up_date)
						VALUES(#{emp_no},#{dtype_no},#{path},#{content}
						#{doc_no},to_char(sysdate, 'YYYY-MM-DD'))
	</insert>
	<select id="EpayWaitList" parameterType="map" resultType="map">
		select b.emp_no,b.dtype_no,b.title,b.doc_no,b.path,a.sign_yn from sign a,docs b
     <!-- where a.doc_no = b.doc_no and sign_yn = 0 -->
     <where>
     	<if test="a.doc_no = b.doc_no">
     	and sign_yn = 0 
     	</if>
     </where>
	</select>
	
</mapper>